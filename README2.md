# ì´ê³µì´ê³µ (Egongegong) - ê°œë°œ ê°€ì´ë“œ & AI ì¸ìŠ¤íŠ¸ëŸ­ì…˜ ë¬¸ì„œ

> **TikTok Seeding OS** - ì¸í”Œë£¨ì–¸ì„œ ë§ˆì¼€íŒ… ìº í˜ì¸ í†µí•© ê´€ë¦¬ í”Œë«í¼

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [Firebase ì¸í”„ë¼](#-firebase-ì¸í”„ë¼)
5. [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#-ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
6. [API ë¼ìš°íŠ¸](#-api-ë¼ìš°íŠ¸)
7. [ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™](#-ì™¸ë¶€-ì„œë¹„ìŠ¤-ì—°ë™)
8. [AI ì„œë¹„ìŠ¤ (Gemini)](#-ai-ì„œë¹„ìŠ¤-gemini)
9. [ìƒíƒœ ê´€ë¦¬](#-ìƒíƒœ-ê´€ë¦¬)
10. [ì¸ì¦ ì‹œìŠ¤í…œ](#-ì¸ì¦-ì‹œìŠ¤í…œ)
11. [í™˜ê²½ ë³€ìˆ˜ ì„¤ì •](#-í™˜ê²½-ë³€ìˆ˜-ì„¤ì •)
12. [ê°œë°œ ê°€ì´ë“œë¼ì¸](#-ê°œë°œ-ê°€ì´ë“œë¼ì¸)
13. [AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ ì¸ìŠ¤íŠ¸ëŸ­ì…˜](#-ai-ì½”ë”©-ì–´ì‹œìŠ¤í„´íŠ¸-ì¸ìŠ¤íŠ¸ëŸ­ì…˜)
14. [ë°°í¬ ê°€ì´ë“œ](#-ë°°í¬-ê°€ì´ë“œ)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 
ì¸í”Œë£¨ì–¸ì„œ ë§ˆì¼€íŒ… ì—ì´ì „ì‹œì™€ ë¸Œëœë“œê°€ ëŒ€ê·œëª¨ ì‹œë”©(ì œí’ˆ í˜‘ì°¬) ìº í˜ì¸ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , í¬ë¦¬ì—ì´í„°ì™€ì˜ í˜‘ìƒë¶€í„° ì •ì‚°ê¹Œì§€ì˜ ì „ ê³¼ì •ì„ í†µí•© ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ëŒ€ì‹œë³´ë“œ.

### í•µì‹¬ ê¸°ëŠ¥
- **ìº í˜ì¸ ê´€ë¦¬**: í”„ë¡œì íŠ¸/ìº í˜ì¸ ìƒì„± ë° ì§„í–‰ ìƒí™© íŠ¸ë˜í‚¹
- **í¬ë¦¬ì—ì´í„° í’€**: ì¸í”Œë£¨ì–¸ì„œ DB ê´€ë¦¬ ë° í”„ë¡œì íŠ¸ ë°°ì •
- **í˜‘ìƒ ì›Œí¬í”Œë¡œìš°**: ìƒíƒœ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš° (Discovery â†’ Paid)
- **ì •ì‚° ê´€ë¦¬**: ê²°ì œ ì²˜ë¦¬ ë° ì˜ˆì‚° íŠ¸ë˜í‚¹
- **AI í˜‘ìƒ ë¶„ì„**: Gemini AIë¥¼ í™œìš©í•œ í˜‘ìƒ ì „ëµ ì œì•ˆ
- **ì™¸ë¶€ ì—°ë™**: Airtable, TikTok API, Zendesk í†µí•©

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| **Next.js** | 16.x | React í”„ë ˆì„ì›Œí¬ (App Router) |
| **React** | 19.x | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì „ì„± |
| **Tailwind CSS** | 4.x | ìŠ¤íƒ€ì¼ë§ |
| **HeroUI** | 2.x | UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| **Framer Motion** | 12.x | ì• ë‹ˆë©”ì´ì…˜ |
| **Recharts** | 2.x | ì°¨íŠ¸/ë°ì´í„° ì‹œê°í™” |
| **TanStack Table** | 8.x | ë°ì´í„° í…Œì´ë¸” |
| **Lucide React** | - | ì•„ì´ì½˜ |

### Backend / Infrastructure
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Firebase Auth** | ì‚¬ìš©ì ì¸ì¦ (Google OAuth) |
| **Firebase Firestore** | NoSQL ë°ì´í„°ë² ì´ìŠ¤ |
| **Firebase Storage** | íŒŒì¼ ì €ì¥ì†Œ |
| **Firebase Analytics** | ì‚¬ìš©ì ë¶„ì„ |
| **Next.js API Routes** | ì„œë²„ì‚¬ì´ë“œ API |

### ìƒíƒœ ê´€ë¦¬
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Zustand** | ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬ |
| **React Hooks** | ë¡œì»¬ ìƒíƒœ ê´€ë¦¬ |

### AI / ì™¸ë¶€ ì„œë¹„ìŠ¤
| ì„œë¹„ìŠ¤ | ìš©ë„ |
|--------|------|
| **Google Gemini** | AI í˜‘ìƒ ë¶„ì„ |
| **Airtable** | ì¸í”Œë£¨ì–¸ì„œ ë°ì´í„° ë™ê¸°í™” |
| **TokAPI (RapidAPI)** | TikTok í¬ë¦¬ì—ì´í„° ë©”íŠ¸ë¦­ìŠ¤ |
| **Zendesk** | ì´ë©”ì¼ ì•„ì›ƒë¦¬ì¹˜ |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
egongegong-next/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx                # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€ (ë¦¬ë‹¤ì´ë ‰íŠ¸)
â”‚   â”œâ”€â”€ providers.tsx             # ì „ì—­ Provider ì„¤ì •
â”‚   â”œâ”€â”€ globals.css               # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                      # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ airtable/route.ts     # Airtable CRUD API
â”‚   â”‚   â”œâ”€â”€ tiktok/route.ts       # TikTok ë©”íŠ¸ë¦­ìŠ¤ API
â”‚   â”‚   â”œâ”€â”€ health/               # í—¬ìŠ¤ì²´í¬
â”‚   â”‚   â”œâ”€â”€ sync/                 # ë°ì´í„° ë™ê¸°í™”
â”‚   â”‚   â””â”€â”€ test-db/              # DB í…ŒìŠ¤íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ login/page.tsx            # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ pending/page.tsx          # ìŠ¹ì¸ ëŒ€ê¸° í˜ì´ì§€
â”‚   â”œâ”€â”€ projects/                 # í”„ë¡œì íŠ¸/ìº í˜ì¸
â”‚   â”‚   â”œâ”€â”€ page.tsx              # í”„ë¡œì íŠ¸ ëª©ë¡
â”‚   â”‚   â””â”€â”€ [id]/page.tsx         # í”„ë¡œì íŠ¸ ìƒì„¸
â”‚   â”œâ”€â”€ creators/page.tsx         # í¬ë¦¬ì—ì´í„° í’€
â”‚   â”œâ”€â”€ finance/page.tsx          # ì •ì‚° HQ
â”‚   â”œâ”€â”€ outreach/page.tsx         # ì•„ì›ƒë¦¬ì¹˜ ê´€ë¦¬
â”‚   â”œâ”€â”€ reports/page.tsx          # ë¦¬í¬íŠ¸/ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ settings/page.tsx         # ì„¤ì •
â”‚
â”œâ”€â”€ components/                   # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AuthProvider.tsx          # ì¸ì¦ Provider
â”‚   â”œâ”€â”€ Toast.tsx                 # í† ìŠ¤íŠ¸ ì•Œë¦¼
â”‚   â”œâ”€â”€ layout/Layout.tsx         # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ ui/                       # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ modals/                   # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ projects/                 # í”„ë¡œì íŠ¸ ê´€ë ¨
â”‚   â”œâ”€â”€ creators/                 # í¬ë¦¬ì—ì´í„° ê´€ë ¨
â”‚   â”œâ”€â”€ finance/                  # ì •ì‚° ê´€ë ¨
â”‚   â”œâ”€â”€ outreach/                 # ì•„ì›ƒë¦¬ì¹˜ ê´€ë ¨
â”‚   â”œâ”€â”€ reports/                  # ë¦¬í¬íŠ¸ ê´€ë ¨
â”‚   â””â”€â”€ settings/                 # ì„¤ì • ê´€ë ¨
â”‚
â”œâ”€â”€ lib/                          # ë¼ì´ë¸ŒëŸ¬ë¦¬/ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ constants.ts              # ìƒìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ utils.ts                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ firebase/                 # Firebase ì„¤ì •
â”‚       â”œâ”€â”€ config.ts             # Firebase ì´ˆê¸°í™”
â”‚       â””â”€â”€ firestore.ts          # Firestore CRUD í•¨ìˆ˜
â”‚
â”œâ”€â”€ hooks/                        # ì»¤ìŠ¤í…€ React Hooks
â”‚   â”œâ”€â”€ useCollection.ts          # Firestore ì‹¤ì‹œê°„ êµ¬ë…
â”‚   â”œâ”€â”€ useAirtableSync.ts        # Airtable ë™ê¸°í™”
â”‚   â””â”€â”€ useTheme.ts               # í…Œë§ˆ ê´€ë¦¬
â”‚
â”œâ”€â”€ stores/                       # Zustand ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ useAuthStore.ts           # ì¸ì¦ ìƒíƒœ
â”‚   â”œâ”€â”€ useBrandStore.ts          # ë¸Œëœë“œ ìƒíƒœ
â”‚   â””â”€â”€ useProjectStore.ts        # í”„ë¡œì íŠ¸ ìƒíƒœ
â”‚
â”œâ”€â”€ services/                     # ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
â”‚   â”œâ”€â”€ airtableService.ts        # Airtable API
â”‚   â”œâ”€â”€ geminiService.ts          # Google Gemini AI
â”‚   â”œâ”€â”€ tokApiService.ts          # TikTok API
â”‚   â””â”€â”€ zendeskService.ts         # Zendesk API
â”‚
â”œâ”€â”€ types.ts                      # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ docs/DATA_FLOW.md             # ë°ì´í„° íë¦„ ë¬¸ì„œ
â”‚
â”œâ”€â”€ next.config.ts                # Next.js ì„¤ì •
â”œâ”€â”€ tailwind.config.ts            # Tailwind CSS ì„¤ì •
â”œâ”€â”€ tsconfig.json                 # TypeScript ì„¤ì •
â””â”€â”€ package.json                  # ì˜ì¡´ì„± ê´€ë¦¬
```

---

## ğŸ”¥ Firebase ì¸í”„ë¼

### í”„ë¡œì íŠ¸ ì •ë³´
```
Project ID: egongegong-eoeo
Region: asia-northeast3 (ì„œìš¸)
```

### Firebase ì„œë¹„ìŠ¤ êµ¬ì„±

#### 1. Firebase Authentication
- **ì¸ì¦ ë°©ì‹**: Google OAuth 2.0
- **ì„¤ì •**: `same-origin-allow-popups` COOP í—¤ë” (íŒì—… ì¸ì¦ ì§€ì›)

```typescript
// lib/firebase/config.ts
import { getAuth } from "firebase/auth";
export const auth = getAuth(app);
```

#### 2. Cloud Firestore
- **ëª¨ë“œ**: Production
- **ìœ„ì¹˜**: asia-northeast3
- **ì‹¤ì‹œê°„ êµ¬ë…**: `onSnapshot` ì‚¬ìš©

```typescript
// lib/firebase/config.ts
import { getFirestore } from "firebase/firestore";
export const db = getFirestore(app);
```

#### 3. Firebase Storage
- **ìš©ë„**: ê³„ì•½ì„œ, ì†¡ê¸ˆ ì¦ë¹™, ì˜ìƒ ìŠ¤í¬ë¦°ìƒ· ì €ì¥

```typescript
// lib/firebase/config.ts
import { getStorage } from "firebase/storage";
export const storage = getStorage(app);
```

#### 4. Firebase Analytics
- **ìš©ë„**: ì‚¬ìš©ì í–‰ë™ ë¶„ì„
- **ì£¼ì˜**: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ ë™ì‘

```typescript
// ë¸Œë¼ìš°ì €ì—ì„œë§Œ ë¡œë“œ
export const getAnalyticsInstance = async () => {
  if (typeof window !== 'undefined') {
    const { getAnalytics } = await import("firebase/analytics");
    return getAnalytics(app);
  }
  return null;
};
```

### Firebase ë³´ì•ˆ ê·œì¹™ (ê¶Œì¥)
```javascript
// firestore.rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // ì‚¬ìš©ì ë¬¸ì„œëŠ” ë³¸ì¸ë§Œ ìˆ˜ì • ê°€ëŠ¥
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth.uid == userId;
    }
    
    // Adminë§Œ ì‚¬ìš©ì ìŠ¹ì¸ ê°€ëŠ¥
    match /users/{userId} {
      allow update: if request.auth != null && 
        get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
  }
}
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### Firestore Collections

#### `projects` - ìº í˜ì¸/í”„ë¡œì íŠ¸
```typescript
interface Project {
  id: string;
  title: string;
  brand: string;
  status: 'Active' | 'Completed' | 'Draft';
  budget: number;
  spent: number;
  description: string;
  startDate: string;
  managers: string[];
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### `influencers` - ì¸í”Œë£¨ì–¸ì„œ/í¬ë¦¬ì—ì´í„°
```typescript
interface Influencer {
  id: string;
  projectId?: string;              // í”„ë¡œì íŠ¸ ë°°ì • ì‹œ
  handle: string;                  // @username
  name: string;
  email: string;
  followerCount: number;
  country: string;
  categories?: string[];           // ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬
  status: InfluencerStatus;        // ì›Œí¬í”Œë¡œìš° ìƒíƒœ
  
  // TikTok ë©”íŠ¸ë¦­ìŠ¤
  metrics?: {
    views: number;
    likes: number;
    comments: number;
    shares: number;
    engagementRate: number;
    avgViewsPerVideo?: number;
  };
  
  // ê³„ì•½ ì •ë³´
  contract: {
    totalAmount: number;
    currency: string;
    videoCount: number;
    paymentMethod: 'Wise' | 'PayPal' | 'Bank Transfer' | 'Unselected';
    paymentSchedule: string;
    platform: 'TikTok' | 'Instagram' | 'YouTube' | 'X (Twitter)';
    status: 'Draft' | 'Sent' | 'Signed';
    milestones: PaymentMilestone[];
    // ...
  };
  
  // ë°°ì†¡ ì •ë³´
  logistics: {
    shippingAddress?: string;
    carrier?: string;
    trackingNumber?: string;
    shippedDate?: string;
    status: 'Pending' | 'Shipped' | 'Delivered';
  };
  
  // ì½˜í…ì¸  ìƒíƒœ
  content: {
    draftLink?: string;
    isApproved: boolean;
    postedVideos: PostedVideo[];
    status: 'Waiting for Draft' | 'Draft Review' | 'Approved' | 'Live';
  };
  
  // ê²°ì œ ì •ë³´
  agreedAmount: number;
  currency: string;
  paymentStatus: 'Unpaid' | 'Processing' | 'Paid';
  paymentRecord?: PaymentRecord;
  
  // í˜‘ìƒ íˆìŠ¤í† ë¦¬
  history: ChatMessage[];
  notes: string;
  
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
```

#### `brands` - ë¸Œëœë“œ
```typescript
interface Brand {
  id: string;
  name: string;
  logo?: string;
  zendeskAccountId?: string;
  createdAt: Timestamp;
}
```

#### `users` - ì‚¬ìš©ì
```typescript
interface User {
  id: string;
  name: string;
  email: string;
  role: 'Admin' | 'Manager' | 'Viewer';
  status: 'Pending' | 'Approved' | 'Declined';
  avatar?: string;
  createdAt: Timestamp;
}
```

#### `zendeskAccounts` - Zendesk ê³„ì •
```typescript
interface ZendeskAccount {
  id: string;
  name: string;
  subdomain: string;
  email: string;
  apiToken: string;  // ì•”í˜¸í™” ê¶Œì¥
  isActive: boolean;
  createdAt: Timestamp;
}
```

#### `categories` - í¬ë¦¬ì—ì´í„° ì¹´í…Œê³ ë¦¬
```typescript
interface Category {
  id: string;
  name: string;
  createdAt: Timestamp;
}
```

### ì¸í”Œë£¨ì–¸ì„œ ìƒíƒœ ì›Œí¬í”Œë¡œìš°
```
Discovery â†’ Contacted â†’ Negotiating â†’ Contracted â†’ Approved â†’ Shipped â†’ Content Live â†’ Payment Pending â†’ Paid
```

| ìƒíƒœ | ì„¤ëª… | íŠ¸ë¦¬ê±° |
|------|------|--------|
| Discovery | ë°œêµ´ ë‹¨ê³„ | í¬ë¦¬ì—ì´í„° í’€ì—ì„œ ì¶”ê°€ |
| Contacted | ì—°ë½ ì™„ë£Œ | ì´ë©”ì¼/DM ë°œì†¡ |
| Negotiating | í˜‘ìƒ ì¤‘ | ì¡°ê±´ í˜‘ì˜ ì§„í–‰ |
| Contracted | ê³„ì•½ ì²´ê²° | ê³„ì•½ì„œ ì„œëª… |
| Approved | ìŠ¹ì¸ë¨ | ë‚´ë¶€ ìŠ¹ì¸ ì™„ë£Œ |
| Shipped | ë°°ì†¡ë¨ | ì œí’ˆ ë°œì†¡ |
| Content Live | ì½˜í…ì¸  ë¼ì´ë¸Œ | ì˜ìƒ ê²Œì‹œ í™•ì¸ |
| Payment Pending | ì •ì‚° ëŒ€ê¸° | ì •ì‚° ìš”ì²­ |
| Paid | ì •ì‚° ì™„ë£Œ | ì†¡ê¸ˆ ì™„ë£Œ |

---

## ğŸŒ API ë¼ìš°íŠ¸

### `/api/airtable`
Airtable ì¸í”Œë£¨ì–¸ì„œ ë°ì´í„° CRUD

```typescript
// GET - ì¸í”Œë£¨ì–¸ì„œ ì¡°íšŒ
GET /api/airtable?limit=10&account=@username

// POST - ìƒì„± (ë‹¨ì¼/ë°°ì¹˜)
POST /api/airtable
Body: { account: string, email: string, ... }
// ë˜ëŠ”
Body: { records: [...] }  // ë°°ì¹˜ ìƒì„±

// PATCH - ìˆ˜ì • (ë‹¨ì¼/ë°°ì¹˜)
PATCH /api/airtable
Body: { id: string, data: {...} }
// ë˜ëŠ”
Body: { records: [{ id: string, data: {...} }, ...] }

// DELETE - ì‚­ì œ (ë‹¨ì¼/ë°°ì¹˜)
DELETE /api/airtable
Body: { id: string }
// ë˜ëŠ”
Body: { ids: [...] }
```

### `/api/tiktok`
TikTok í¬ë¦¬ì—ì´í„° ë©”íŠ¸ë¦­ìŠ¤ ì¡°íšŒ

```typescript
// GET - í¬ë¦¬ì—ì´í„° ë©”íŠ¸ë¦­ìŠ¤
GET /api/tiktok?username=@creator_handle

// Response
{
  status: 'ok',
  username: '@creator_handle',
  user: {
    id: string,
    handle: string,
    name: string,
    avatar: string,
    verified: boolean,
    bio: string
  },
  stats: {
    followers: number,
    following: number,
    totalLikes: number,
    videoCount: number
  },
  metrics: {
    avgViews: number,
    avgLikes: number,
    avgComments: number,
    avgShares: number,
    engagementRate: number
  }
}
```

### `/api/health`
ì„œë²„ í—¬ìŠ¤ì²´í¬

### `/api/sync/airtable`
Airtable â†” Firestore ë™ê¸°í™”

---

## ğŸ”— ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

### 1. Airtable Service
**íŒŒì¼**: `services/airtableService.ts`

```typescript
// ì£¼ìš” í•¨ìˆ˜
fetchAllInfluencers(): Promise<AirtableInfluencer[]>
fetchInfluencersByAccounts(accounts: string[]): Promise<AirtableInfluencer[]>
createInfluencerInAirtable(data: AirtableInfluencerInput): Promise<AirtableInfluencer>
updateInfluencerInAirtable(id: string, data: Partial<AirtableInfluencerInput>): Promise<void>
deleteInfluencerFromAirtable(id: string): Promise<void>
batchCreateInfluencersInAirtable(records: AirtableInfluencerInput[]): Promise<AirtableInfluencer[]>
batchUpdateInfluencersInAirtable(updates: {id: string, data: Partial}[]): Promise<void>
```

**Airtable í•„ë“œ ë§¤í•‘**:
| Airtable í•„ë“œ | ì•± í•„ë“œ |
|--------------|---------|
| Influencer Account | account |
| TIKTOK PROFILE LINK | tiktokProfileLink |
| Email | email |
| Followers | followers |
| MAX Views | maxViews |
| 5_average | averageViews5 |
| 20_median | medianViews20 |
| 20_average | averageViews20 |
| Followers ë¶„í¬ | followersDistribution |
| Collab Count | collabCount |
| Average Rate | averageRate |

### 2. TokAPI Service (TikTok)
**íŒŒì¼**: `services/tokApiService.ts`

```typescript
// RapidAPI - TikTok Scraper7
const RAPIDAPI_HOST = 'tiktok-scraper7.p.rapidapi.com';

// ì£¼ìš” í•¨ìˆ˜
fetchTikTokUser(username: string): Promise<TikTokUserInfo | null>
fetchUserVideos(username: string, count?: number): Promise<TikTokVideoInfo[]>
fetchCreatorMetrics(username: string): Promise<TikTokMetricsResult | null>
```

**ë°˜í™˜ ë©”íŠ¸ë¦­ìŠ¤**:
- íŒ”ë¡œì›Œ ìˆ˜, íŒ”ë¡œì‰ ìˆ˜, ì´ ì¢‹ì•„ìš”
- í‰ê·  ì¡°íšŒìˆ˜, í‰ê·  ì¢‹ì•„ìš”, í‰ê·  ëŒ“ê¸€, í‰ê·  ê³µìœ 
- ì¸ê²Œì´ì§€ë¨¼íŠ¸ ë ˆì´íŠ¸

### 3. Zendesk Service
**íŒŒì¼**: `services/zendeskService.ts`

```typescript
// ë©€í‹° ë¸Œëœë“œ ì§€ì› (ê³„ì •ë³„ ë¶„ë¦¬)
createTicket(accountId: string, data: TicketData): Promise<ZendeskTicket>
getTickets(accountId: string, filters?: TicketFilters): Promise<ZendeskTicket[]>
updateTicket(accountId: string, ticketId: number, data: Partial<TicketData>): Promise<void>
getMacros(accountId: string): Promise<ZendeskMacro[]>
searchUsers(accountId: string, email: string): Promise<ZendeskUser[]>
```

**ì¸ì¦**: Basic Auth (email/token)

---

## ğŸ¤– AI ì„œë¹„ìŠ¤ (Gemini)

### êµ¬ì„±
**íŒŒì¼**: `services/geminiService.ts`

```typescript
import { GoogleGenAI } from "@google/genai";

// Gemini 3 Pro Preview ì‚¬ìš©
const model = "gemini-3-pro-preview";

// Thinking ëª¨ë“œ í™œì„±í™” (ë”¥ ì¶”ë¡ )
const config = {
  thinkingConfig: { thinkingBudget: 32768 }  // ìµœëŒ€ ì‚¬ê³  ì˜ˆì‚°
};
```

### AI í˜‘ìƒ ë¶„ì„ ê¸°ëŠ¥
```typescript
analyzeNegotiation(influencer: Influencer, messages: ChatMessage[]): Promise<string>
```

**ì…ë ¥ ì»¨í…ìŠ¤íŠ¸**:
- ì¸í”Œë£¨ì–¸ì„œ ì •ë³´ (í•¸ë“¤, íŒ”ë¡œì›Œ ìˆ˜, í˜„ì¬ ìƒíƒœ)
- ì œì•ˆ/í•©ì˜ ê¸ˆì•¡
- ì„±ê³¼ ë©”íŠ¸ë¦­ìŠ¤ (ì¡°íšŒìˆ˜, ì¸ê²Œì´ì§€ë¨¼íŠ¸ìœ¨)
- í˜‘ìƒ íˆìŠ¤í† ë¦¬ (ì´ë©”ì¼/ë‚´ë¶€ ë…¸íŠ¸)

**AI ì¶œë ¥**:
1. í˜„ì¬ ìƒí™© ì „ëµì  ë¶„ì„
2. êµ¬ì²´ì ì¸ ë‹¤ìŒ í–‰ë™ ì¶”ì²œ
3. ë°”ë¡œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì‘ë‹µ ì´ˆì•ˆ

### AI í”„ë¡¬í”„íŠ¸ êµ¬ì¡°
```
You are a Strategic Influencer Marketing Negotiator for a brand.
Analyze the following negotiation history with influencer {handle} ({followers} followers).

Current Status: {status}
Agreed/Proposed Amount: {amount} {currency}
Engagement Metrics: Views: {views}, ER: {engagementRate}%

Negotiation History:
{messages}

Your goal is to maximize ROI while maintaining a good relationship.

Provide:
1. A strategic analysis of the current situation.
2. A specific recommended next step (e.g., "Counter offer with $X", "Ask for usage rights", "Accept offer").
3. A draft response (if applicable) that the operator can send immediately.
```

---

## ğŸ—ƒï¸ ìƒíƒœ ê´€ë¦¬

### Zustand Stores

#### `useAuthStore`
```typescript
interface AuthState {
  user: User | null;           // Firebase Auth ì‚¬ìš©ì
  appUser: AppUser | null;     // Firestore ì‚¬ìš©ì ë¬¸ì„œ
  loading: boolean;
  setUser: (user: User | null) => void;
  setAppUser: (appUser: AppUser | null) => void;
  setLoading: (loading: boolean) => void;
  signOut: () => void;
  reset: () => void;
}
```

#### `useBrandStore`
```typescript
interface BrandState {
  selectedBrand: Brand | null;
  setSelectedBrand: (brand: Brand | null) => void;
}
```

### Custom Hooks

#### `useCollection` - ì‹¤ì‹œê°„ Firestore êµ¬ë…
```typescript
// ë²”ìš© ì»¬ë ‰ì…˜ Hook
function useCollection<T>(collectionName: string, constraints?: QueryConstraint[])
  : { data: T[], loading: boolean, error: Error | null }

// íŠ¹í™” Hooks
useProjects(): { data: Project[], loading, error }
useInfluencers(projectId?: string): { data: Influencer[], loading, error }
useBrands(): { data: Brand[], loading, error }
useCategories(): { data: Category[], loading, error }
useUsers(): { data: User[], loading, error }
```

---

## ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ

### ì¸ì¦ í”Œë¡œìš°
```
1. ì‚¬ìš©ìê°€ Google ë¡œê·¸ì¸ ì‹œë„
2. Firebase Authë¡œ Google OAuth ì²˜ë¦¬
3. AuthProviderê°€ onAuthStateChanged ê°ì§€
4. Firestoreì—ì„œ ì‚¬ìš©ì ë¬¸ì„œ ì¡°íšŒ
   - ìˆìœ¼ë©´: appUser ìƒíƒœ ì„¤ì •
   - ì—†ìœ¼ë©´: status='pending'ìœ¼ë¡œ ìƒˆ ë¬¸ì„œ ìƒì„±
5. ìƒíƒœì— ë”°ë¥¸ ë¼ìš°íŒ…:
   - pending â†’ /pending (ìŠ¹ì¸ ëŒ€ê¸° í˜ì´ì§€)
   - approved/active â†’ / (ë©”ì¸ ì•±)
```

### AuthProvider êµ¬í˜„
```typescript
// components/AuthProvider.tsx
export function AuthProvider({ children }) {
  const { setUser, setAppUser, setLoading } = useAuthStore();

  useEffect(() => {
    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {
      setLoading(true);
      
      if (firebaseUser) {
        setUser(firebaseUser);
        
        const userDocRef = doc(db, 'users', firebaseUser.uid);
        const userDocSnap = await getDoc(userDocRef);
        
        if (userDocSnap.exists()) {
          setAppUser(userDocSnap.data() as AppUser);
        } else {
          // ìƒˆ ì‚¬ìš©ì ìƒì„± (pending ìƒíƒœ)
          const newUser: AppUser = {
            uid: firebaseUser.uid,
            email: firebaseUser.email,
            name: firebaseUser.displayName || 'User',
            role: 'user',
            status: 'pending',
          };
          await setDoc(userDocRef, newUser);
          setAppUser(newUser);
        }
      } else {
        setUser(null);
        setAppUser(null);
      }
      
      setLoading(false);
    });

    return () => unsubscribe();
  }, []);

  return <>{children}</>;
}
```

### ì‚¬ìš©ì ê¶Œí•œ ë ˆë²¨
| ì—­í•  | ê¶Œí•œ |
|------|------|
| Admin | ëª¨ë“  ê¸°ëŠ¥ + ì‚¬ìš©ì ìŠ¹ì¸ |
| Manager | í”„ë¡œì íŠ¸ ê´€ë¦¬ + í¬ë¦¬ì—ì´í„° ê´€ë¦¬ |
| Viewer | ì½ê¸° ì „ìš© |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### `.env.local` íŒŒì¼
```bash
# Firebase Configuration
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSy...
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=egongegong-eoeo.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=egongegong-eoeo
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=egongegong-eoeo.firebasestorage.app
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=1002249339676
NEXT_PUBLIC_FIREBASE_APP_ID=1:1002249339676:web:...
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=G-BL2713R6WX

# Airtable Configuration
AIRTABLE_API_TOKEN=pat...
AIRTABLE_BASE_ID=appgQd2ROl1QfZKi3
AIRTABLE_TABLE_NAME=Influencers

# TikTok API (RapidAPI)
NEXT_PUBLIC_RAPIDAPI_KEY=your_rapidapi_key

# Google Gemini AI
NEXT_PUBLIC_GEMINI_API_KEY=your_gemini_api_key
```

### í™˜ê²½ ë³€ìˆ˜ êµ¬ë¶„
- `NEXT_PUBLIC_*`: í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œ (ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©)
- ì ‘ë‘ì‚¬ ì—†ìŒ: ì„œë²„ ì „ìš© (API ë¼ìš°íŠ¸ì—ì„œë§Œ ì‚¬ìš©)

---

## ğŸ“ ê°œë°œ ê°€ì´ë“œë¼ì¸

### ì½”ë“œ ìŠ¤íƒ€ì¼
```typescript
// ì»´í¬ë„ŒíŠ¸ íŒŒì¼ êµ¬ì¡°
'use client';  // í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ í•„ìˆ˜

import { ... } from 'react';
import { ... } from '@/lib/...';
import { ... } from '@/components/...';

interface Props { ... }

export function ComponentName({ prop1, prop2 }: Props) {
  // hooks
  const [state, setState] = useState();
  
  // effects
  useEffect(() => { ... }, []);
  
  // handlers
  const handleClick = () => { ... };
  
  // render
  return ( ... );
}
```

### Firestore ì‘ì—… íŒ¨í„´
```typescript
// ì½ê¸° - ì‹¤ì‹œê°„ êµ¬ë… (ê¶Œì¥)
const { data, loading, error } = useInfluencers(projectId);

// ì“°ê¸° - ì„œë¹„ìŠ¤ í•¨ìˆ˜ ì‚¬ìš©
import { updateInfluencer, processPayment } from '@/lib/firebase/firestore';

const handleUpdate = async () => {
  try {
    await updateInfluencer(id, { status: 'Approved' });
    toast.success('ì—…ë°ì´íŠ¸ ì™„ë£Œ');
  } catch (error) {
    toast.error('ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
  }
};
```

### ì—ëŸ¬ ì²˜ë¦¬
```typescript
// API ë¼ìš°íŠ¸
export async function GET(request: NextRequest) {
  try {
    const data = await fetchData();
    return NextResponse.json({ success: true, data });
  } catch (error) {
    console.error('API Error:', error);
    return NextResponse.json(
      { error: error instanceof Error ? error.message : 'Unknown error' },
      { status: 500 }
    );
  }
}

// ì»´í¬ë„ŒíŠ¸
const handleAction = async () => {
  try {
    await someAsyncOperation();
  } catch (error) {
    console.error('Operation failed:', error);
    toast.error('ì‘ì—… ì‹¤íŒ¨');
  }
};
```

### íŒŒì¼ ë„¤ì´ë° ê·œì¹™
| íƒ€ì… | ê·œì¹™ | ì˜ˆì‹œ |
|------|------|------|
| ì»´í¬ë„ŒíŠ¸ | PascalCase | `ProjectCard.tsx` |
| í˜ì´ì§€ | kebab-case í´ë” | `app/projects/page.tsx` |
| Hook | camelCase (use prefix) | `useCollection.ts` |
| ì„œë¹„ìŠ¤ | camelCase (Service suffix) | `airtableService.ts` |
| íƒ€ì… | PascalCase | `types.ts` ë‚´ `interface Project` |
| ìƒìˆ˜ | SCREAMING_SNAKE_CASE | `MOCK_BRANDS` |

---

## ğŸ¤– AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ ì¸ìŠ¤íŠ¸ëŸ­ì…˜

### í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
```
ì´ í”„ë¡œì íŠ¸ëŠ” ì¸í”Œë£¨ì–¸ì„œ ë§ˆì¼€íŒ… ìº í˜ì¸ ê´€ë¦¬ í”Œë«í¼ì…ë‹ˆë‹¤.
- Next.js 16 (App Router) + React 19 + TypeScript
- Firebase (Auth, Firestore, Storage) ë°±ì—”ë“œ
- HeroUI + Tailwind CSS ìŠ¤íƒ€ì¼ë§
- Zustand ìƒíƒœ ê´€ë¦¬
```

### ì½”ë“œ ìƒì„± ì‹œ ì¤€ìˆ˜ì‚¬í•­

#### 1. í´ë¼ì´ì–¸íŠ¸/ì„œë²„ êµ¬ë¶„
```typescript
// í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ (useState, useEffect ì‚¬ìš© ì‹œ)
'use client';

// ì„œë²„ ì»´í¬ë„ŒíŠ¸ (ê¸°ë³¸ê°’, ë°ì´í„° í˜ì¹­)
// 'use client' ì—†ìŒ
```

#### 2. Import ê²½ë¡œ
```typescript
// @ alias ì‚¬ìš©
import { db } from '@/lib/firebase/config';
import { Button } from '@/components/ui/Button';
import type { Project } from '@/types';
```

#### 3. Firestore ì‘ì—…
```typescript
// ì½ê¸°ëŠ” useCollection hook ì‚¬ìš©
const { data: projects, loading } = useProjects();

// ì“°ê¸°ëŠ” lib/firebase/firestore.ts í•¨ìˆ˜ ì‚¬ìš©
await updateProject(id, { status: 'Completed' });
```

#### 4. ìƒíƒœ ê´€ë¦¬
```typescript
// ì „ì—­ ìƒíƒœ: Zustand
import { useAuthStore } from '@/stores/useAuthStore';
const { user, appUser } = useAuthStore();

// ì„œë²„ ìƒíƒœ: useCollection (ì‹¤ì‹œê°„ êµ¬ë…)
const { data } = useInfluencers();

// ë¡œì»¬ ìƒíƒœ: useState
const [isOpen, setIsOpen] = useState(false);
```

#### 5. UI ì»´í¬ë„ŒíŠ¸
```typescript
// HeroUI ìš°ì„  ì‚¬ìš©
import { Button, Modal, Input } from '@heroui/react';

// ì•„ì´ì½˜ì€ Lucide
import { Plus, Search, Settings } from 'lucide-react';
```

#### 6. ìŠ¤íƒ€ì¼ë§
```typescript
// Tailwind CSS í´ë˜ìŠ¤ ì‚¬ìš©
<div className="flex items-center gap-4 p-4 bg-background">

// ë‹¤í¬ ëª¨ë“œ ì§€ì›
<div className="bg-white dark:bg-gray-900">
```

#### 7. íƒ€ì… ì•ˆì „ì„±
```typescript
// types.tsì—ì„œ import
import type { Project, Influencer, InfluencerStatus } from '@/types';

// enum ì‚¬ìš©
import { InfluencerStatus } from '@/types';
if (status === InfluencerStatus.Paid) { ... }
```

#### 8. API ë¼ìš°íŠ¸ ì‘ì„±
```typescript
// app/api/[endpoint]/route.ts
import { NextRequest, NextResponse } from 'next/server';

export async function GET(request: NextRequest) {
  const { searchParams } = new URL(request.url);
  // ...
  return NextResponse.json({ success: true, data });
}
```

### ê¸ˆì§€ ì‚¬í•­
- âŒ `any` íƒ€ì… ì‚¬ìš© (í•„ìš”ì‹œ `unknown` í›„ íƒ€ì… ê°€ë“œ)
- âŒ ì§ì ‘ Firestore import (ì„œë¹„ìŠ¤ í•¨ìˆ˜ ì‚¬ìš©)
- âŒ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ (Tailwind ì‚¬ìš©)
- âŒ console.log í”„ë¡œë•ì…˜ ì½”ë“œì— ë‚¨ê¸°ê¸°
- âŒ í™˜ê²½ ë³€ìˆ˜ í•˜ë“œì½”ë”©

### ê¶Œì¥ ì‚¬í•­
- âœ… ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì‚¬ìš©
- âœ… Loading/Empty ìƒíƒœ ì²˜ë¦¬
- âœ… TypeScript strict mode
- âœ… ì ‘ê·¼ì„± (aria-label, role ë“±)
- âœ… ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ìš°ì„ )

---

## ğŸš€ ë°°í¬ ê°€ì´ë“œ

### ë¡œì»¬ ê°œë°œ
```bash
cd egongegong-next
pnpm install
pnpm dev
# http://localhost:3000
```

### í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
pnpm build
pnpm start
```

### Vercel ë°°í¬ (ê¶Œì¥)
1. GitHub ë ˆí¬ì§€í† ë¦¬ ì—°ê²°
2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (Vercel Dashboard)
3. ìë™ ë°°í¬ (main ë¸Œëœì¹˜ push ì‹œ)

### Firebase Hosting ë°°í¬
```bash
# Firebase CLI ì„¤ì¹˜
npm install -g firebase-tools

# ë¡œê·¸ì¸ & ì´ˆê¸°í™”
firebase login
firebase init hosting

# ë¹Œë“œ & ë°°í¬
pnpm build
firebase deploy --only hosting
```

### í™˜ê²½ë³„ ì„¤ì •
| í™˜ê²½ | Firebase í”„ë¡œì íŠ¸ | ë„ë©”ì¸ |
|------|------------------|--------|
| Development | egongegong-eoeo-dev | localhost:3000 |
| Staging | egongegong-eoeo-staging | staging.egongegong.com |
| Production | egongegong-eoeo | egongegong.com |

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ë¬¸ì„œ
- [DATA_FLOW.md](./egongegong-next/docs/DATA_FLOW.md) - ìƒì„¸ ë°ì´í„° íë¦„
- [Next.js ë¬¸ì„œ](https://nextjs.org/docs)
- [Firebase ë¬¸ì„œ](https://firebase.google.com/docs)
- [HeroUI ë¬¸ì„œ](https://heroui.com)

### ê´€ë ¨ ë ˆí¬ì§€í† ë¦¬
- `vite-original/` - ì›ë³¸ Vite í”„ë¡œì íŠ¸ (ë ˆí¼ëŸ°ìŠ¤)
- `_vite-reference/` - Vite UI ì»´í¬ë„ŒíŠ¸ ë ˆí¼ëŸ°ìŠ¤

---

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜: [GitHub Issues](https://github.com/sjh-eoeo/egongegong-workspace/issues)

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025ë…„ 12ì›” 2ì¼*
